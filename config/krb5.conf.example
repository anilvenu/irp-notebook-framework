# =============================================================================
# Kerberos Configuration for IRP Notebook Framework
# =============================================================================
#
# This is an example krb5.conf file for Windows Authentication to SQL Server.
# Copy this file to config/krb5.conf and customize for your Active Directory domain.
#
# Usage:
#   1. Copy this file: cp config/krb5.conf.example config/krb5.conf
#   2. Update the realm and KDC settings for your domain
#   3. Uncomment the volume mounts in docker-compose.yml
#   4. Set KERBEROS_ENABLED=true in .env
#
# For Development (Hyper-V Lab):
#   - Default realm: IRPLAB.LOCAL
#   - KDC: irp-adlab01.irplab.local (or IP: 192.168.100.10)
#
# For Production:
#   - Get realm and KDC details from your Active Directory administrator
#   - Ensure network connectivity to KDC (port 88)
#
# =============================================================================

[libdefaults]
    # Default Kerberos realm (must match your AD domain, in UPPERCASE)
    default_realm = IRPLAB.LOCAL

    # DNS lookup settings
    # Set to 'false' if using explicit KDC addresses below
    # Set to 'true' if KDC can be discovered via DNS SRV records
    dns_lookup_realm = false
    dns_lookup_kdc = false

    # Ticket lifetime settings
    ticket_lifetime = 24h
    renew_lifetime = 7d
    forwardable = true

    # Encryption types (AES is recommended for security)
    default_tgs_enctypes = aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96
    default_tkt_enctypes = aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96
    permitted_enctypes = aes256-cts-hmac-sha1-96 aes128-cts-hmac-sha1-96

[realms]
    # Define your Active Directory realm(s)
    # Replace with your actual domain settings

    IRPLAB.LOCAL = {
        # Key Distribution Center (usually the Domain Controller)
        # Can use hostname or IP address
        kdc = irp-adlab01.irplab.local
        # kdc = 192.168.100.10

        # Admin server (usually same as KDC)
        admin_server = irp-adlab01.irplab.local

        # Default domain for this realm
        default_domain = irplab.local
    }

    # Add additional realms if needed (e.g., production domain)
    # CORP.COMPANY.COM = {
    #     kdc = dc01.corp.company.com
    #     admin_server = dc01.corp.company.com
    #     default_domain = corp.company.com
    # }

[domain_realm]
    # Map domain names to Kerberos realms
    # Both lowercase domain and hosts should map to UPPERCASE realm

    .irplab.local = IRPLAB.LOCAL
    irplab.local = IRPLAB.LOCAL

    # Add additional domain mappings if needed
    # .corp.company.com = CORP.COMPANY.COM
    # corp.company.com = CORP.COMPANY.COM

[logging]
    # Logging configuration (optional)
    # Useful for debugging Kerberos issues
    default = SYSLOG
    # default = FILE:/var/log/krb5libs.log
    # kdc = FILE:/var/log/krb5kdc.log
    # admin_server = FILE:/var/log/kadmind.log
